{"version":3,"sources":["webpack:///./src/components/layouts/method-layout.js"],"names":["MethodHeadline","styled","InpageHeadline","media","mediumUp","MethodIcon","img","MethodIntro","article","MethodMeta","aside","ActivityList","section","CardList","ActivityCard","Card","CardHeading","MethodLayout","data","location","method","childMarkdownRemark","frontmatter","frontmattermd","fields","activities","edges","activityNodes","forEach","activity","node","title","slug","excerpt","summary","references","referenceNodes","reference","html","prevPath","state","prevPage","sections","mapValues","replace","withPrefix","columnLayout","direction","to","startsWith","size","variation","src","method_icon","withDeco","dangerouslySetInnerHTML","__html","purpose","boldDesc","authors","info_provided","required","the_flow_of_information","guiding_questions","operational_security","border","preparation","outputs","map","index","key","as","Link","withHover","query"],"mappings":"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","file":"component---src-components-layouts-method-layout-js-a27dcc8e9229de2c4abf.js","sourcesContent":["import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport { graphql, Link, withPrefix } from \"gatsby\"\nimport styled from \"styled-components\"\nimport mapValues from \"lodash.mapvalues\"\n\nimport GlobalLayout from \"./global-layout\"\nimport SEO from \"../seo\"\n\nimport {\n  Inpage,\n  InpageInnerColumns,\n  InpageHeader,\n  InpageHeadline,\n  InpageBody,\n  InpageTitle,\n} from \"../../styles/inpage\"\n\nimport MoreLink from \"../../styles/button/more-link\"\nimport Dl, { SquareUl } from \"../../styles/type/lists\"\nimport media from \"../../styles/utils/media-queries\"\nimport Card, { CardHeading, CardList } from \"../../styles/card\"\n\nconst MethodHeadline = styled(InpageHeadline)`\n  ${media.mediumUp`\n    grid-column: span 2;\n  `}\n`\n\nconst MethodIcon = styled.img`\n  position: relative;\n  max-width: 2.5rem;\n  margin-left: 1rem;\n  margin-top: 1rem;\n  bottom: -0.25rem;\n  vertical-align: bottom;\n`\n\nconst MethodIntro = styled.article`\n  display: flex;\n  flex-flow: column nowrap;\n  p {\n    max-width: 60ch;\n    &:first-of-type {\n      &::first-line {\n        text-transform: uppercase;\n        font-weight: bold;\n      }\n    }\n  }\n`\nconst MethodMeta = styled.aside``\n\nconst ActivityList = styled.section`\n  grid-column: span 2;\n\n  ${CardList} {\n    margin-top: 2rem;\n  }\n`\nconst ActivityCard = styled(Card)`\n  ${media.mediumUp`\n    min-height: 6rem;\n  `}\n  ${CardHeading} {\n    margin: 0;\n  }\n`\n\nfunction MethodLayout({ data, location }) {\n  const {\n    frontmatter,\n    fields: { frontmattermd },\n  } = data.method.childMarkdownRemark\n\n  // creates an object with activity names as keys and activity slugs as values\n  let activities = data.activities.edges\n  const activityNodes = {}\n  activities.forEach(\n    activity =>\n      (activityNodes[activity.node.childMarkdownRemark.frontmatter.title] = {\n        slug: activity.node.fields.slug,\n        excerpt:\n          activity.node.childMarkdownRemark.fields.frontmattermd.summary\n            ?.excerpt,\n      })\n  )\n\n  // creates an object with reference names as keys and reference slugs as values\n  let references = data.references.edges\n  const referenceNodes = {}\n  references.forEach(\n    reference =>\n      (referenceNodes[reference.node.childMarkdownRemark.frontmatter.title] = {\n        title: reference.node.childMarkdownRemark.frontmatter.title,\n        html: reference.node.childMarkdownRemark.html,\n      })\n  )\n\n  // Get previous page path, if available\n  let prevPath = location.state && location.state.prevPath || \"\"\n  let prevPage = location.state && location.state.prevPage || \"\"\n\n  // Fix images URL by adding app root url with prefix\n  const sections = mapValues(frontmattermd, section => {\n    if (section && section.html) {\n      return section.html.replace(\n        /<img src=\"\\/img/g,\n        `<img src=\"${withPrefix(\"/img\")}`\n      )\n    }\n    return section\n  })\n\n  return (\n    <GlobalLayout>\n      <SEO title={`Method: ` + frontmatter.title} />\n      <Inpage>\n        <InpageHeader>\n          <InpageInnerColumns columnLayout=\"2:1\">\n            <MethodHeadline>\n              <MoreLink\n                direction=\"back\"\n                to={\n                  prevPath.startsWith(\"/guide-builder\")\n                    ? prevPage\n                    : \"/#allMethods\"\n                }\n              >\n                Back to {prevPath ? \"guide builder\" : \"all methods\"}\n              </MoreLink>\n              <InpageTitle size=\"jumbo\" variation=\"primary\">\n                {frontmatter.title}\n                <MethodIcon src={frontmatter.method_icon} />\n              </InpageTitle>\n            </MethodHeadline>\n            <MethodIntro>\n              <InpageTitle size=\"large\" withDeco>\n                Summary\n              </InpageTitle>\n              <div\n                dangerouslySetInnerHTML={{ __html: sections.summary }}\n              ></div>\n              <InpageTitle size=\"large\" withDeco>\n                Purpose\n              </InpageTitle>\n              <div\n                dangerouslySetInnerHTML={{ __html: sections.purpose }}\n              ></div>\n            </MethodIntro>\n            <MethodMeta>\n              <Dl boldDesc>\n                <dt>Author</dt>\n                <dd>{frontmatter.authors}</dd>\n                {frontmatter.info_provided !== \"\" && (\n                  <>\n                    <dt>Info Provided</dt>\n                    <dd>{frontmatter.info_provided}</dd>\n                    <dt>Info Required</dt>\n                    <dd>{frontmatter.required}</dd>\n                  </>\n                )}\n              </Dl>\n            </MethodMeta>\n          </InpageInnerColumns>\n        </InpageHeader>\n        <InpageBody>\n          <InpageInnerColumns columnLayout=\"2:1\">\n            <section>\n              {sections.the_flow_of_information && (\n                <>\n                  <InpageTitle size=\"large\" withDeco>\n                    The Flow of Information\n                  </InpageTitle>\n                  <SquareUl\n                    dangerouslySetInnerHTML={{\n                      __html: sections.the_flow_of_information,\n                    }}\n                  ></SquareUl>\n                </>\n              )}\n              <InpageTitle size=\"large\" withDeco>\n                Guiding Questions\n              </InpageTitle>\n              <SquareUl\n                dangerouslySetInnerHTML={{\n                  __html: sections.guiding_questions,\n                }}\n              ></SquareUl>\n            </section>\n            <section></section>\n          </InpageInnerColumns>\n          <InpageInnerColumns columnLayout=\"1:1\">\n            {sections.operational_security && (\n              <Card border=\"base\">\n                <CardHeading>Operational Security</CardHeading>\n                <div\n                  dangerouslySetInnerHTML={{\n                    __html: sections.operational_security,\n                  }}\n                ></div>\n              </Card>\n            )}\n            {sections.preparation && (\n              <Card border=\"base\">\n                <CardHeading>Preparation</CardHeading>\n                <SquareUl\n                  dangerouslySetInnerHTML={{\n                    __html: sections.preparation,\n                  }}\n                ></SquareUl>\n              </Card>\n            )}\n          </InpageInnerColumns>\n          <InpageInnerColumns columnLayout=\"2:1\">\n            <section>\n              {sections.outputs && (\n                <>\n                  <InpageTitle size=\"large\" withDeco>\n                    Outputs\n                  </InpageTitle>\n                  <SquareUl\n                    dangerouslySetInnerHTML={{\n                      __html: sections.outputs,\n                    }}\n                  ></SquareUl>\n                </>\n              )}\n            </section>\n          </InpageInnerColumns>\n        </InpageBody>\n        <InpageBody>\n          <InpageInnerColumns columnLayout=\"2:1\">\n            <section>\n              <InpageTitle size=\"large\" withDeco>\n                References\n              </InpageTitle>\n              <SquareUl>\n                {(frontmatter.references || []).map(reference => (\n                  <>\n                    <p>{referenceNodes[reference].title}:</p>\n                    <div\n                      dangerouslySetInnerHTML={{\n                        __html: referenceNodes[reference].html,\n                      }}\n                    ></div>\n                  </>\n                ))}\n              </SquareUl>\n            </section>\n            <section></section>\n            <ActivityList>\n              <InpageTitle size=\"large\" withDeco>\n                Activities\n              </InpageTitle>\n              <CardList>\n                {(frontmatter.activities || []).map((activity, index) => (\n                  <li key={index}>\n                    <ActivityCard\n                      as={Link}\n                      to={`${activityNodes[activity].slug}/`}\n                      border=\"primary\"\n                      variation=\"secondary\"\n                      withHover\n                    >\n                      <CardHeading variation=\"primary\">{activity}_</CardHeading>\n                      <div\n                        dangerouslySetInnerHTML={{\n                          __html: activityNodes[activity].excerpt,\n                        }}\n                      ></div>\n                    </ActivityCard>\n                  </li>\n                ))}\n              </CardList>\n            </ActivityList>\n          </InpageInnerColumns>\n        </InpageBody>\n      </Inpage>\n    </GlobalLayout>\n  )\n}\n\nMethodLayout.propTypes = {\n  data: PropTypes.object,\n  location: PropTypes.object,\n}\n\nexport default MethodLayout\n\nexport const query = graphql`\n  query($slug: String!) {\n    method: file(fields: { slug: { eq: $slug } }) {\n      childMarkdownRemark {\n        html\n        frontmatter {\n          title\n          authors\n          activities\n          info_provided\n          info_required\n          references\n          method_icon\n        }\n        fields {\n          frontmattermd {\n            summary {\n              html\n            }\n            purpose {\n              html\n            }\n            the_flow_of_information {\n              html\n            }\n            guiding_questions {\n              html\n            }\n            preparation {\n              html\n            }\n            outputs {\n              html\n            }\n            operational_security {\n              html\n            }\n          }\n        }\n      }\n    }\n    activities: allFile(\n      filter: {\n        relativeDirectory: { eq: \"activities\" }\n        internal: { mediaType: { eq: \"text/markdown\" } }\n      }\n    ) {\n      edges {\n        node {\n          fields {\n            slug\n          }\n          childMarkdownRemark {\n            frontmatter {\n              title\n            }\n            fields {\n              frontmattermd {\n                summary {\n                  excerpt\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    references: allFile(\n      filter: {\n        relativeDirectory: { eq: \"references\" }\n        internal: { mediaType: { eq: \"text/markdown\" } }\n      }\n    ) {\n      edges {\n        node {\n          fields {\n            slug\n          }\n          childMarkdownRemark {\n            frontmatter {\n              title\n            }\n            html\n          }\n        }\n      }\n    }\n  }\n`\n"],"sourceRoot":""}